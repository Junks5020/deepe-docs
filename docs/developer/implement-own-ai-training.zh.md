
# ğŸ› ï¸ å¦‚ä½•å®ç°ä½ è‡ªå·±çš„è®­ç»ƒé€»è¾‘

DeepExtension å…è®¸ä½ å°†è‡ªå®šä¹‰çš„ AI è®­ç»ƒä»£ç é›†æˆåˆ°å…¶ UI é©±åŠ¨çš„è®­ç»ƒæµç¨‹ä¸­ã€‚  
åªè¦ä½ çš„ä»£ç èƒ½åœ¨æœ¬åœ° Python ç¯å¢ƒä¸­æ­£å¸¸è¿è¡Œï¼Œå®ƒå°±å‡ ä¹å¯ä»¥è¢«æ‰©å±•åˆ° DeepExtension ä¸­ä½¿ç”¨ã€‚

æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡ `custom01.py` ï¼ˆæˆ– `custom02.py`ï¼‰ å°†è‡ªå®šä¹‰è®­ç»ƒè„šæœ¬æ³¨å†Œä¸ºå¯è§†åŒ–ç•Œé¢å¯ç”¨çš„æ–¹æ³•ã€‚

---

## ğŸš€ åŸºæœ¬æ€è·¯

åªè¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œä½ çš„è®­ç»ƒä»£ç å°±å¯ä»¥è¢« DeepExtension æ¥ç®¡è¿è¡Œï¼š

- èƒ½æ¥å—ä» UI ä¼ å…¥çš„å‚æ•°
- æ”¯æŒæ—¥å¿—å›è°ƒï¼ˆç”¨äºå®æ—¶è®°å½•è®­ç»ƒçŠ¶æ€ï¼‰
- ä½¿ç”¨æ ‡å‡†æ¥å£ä¿å­˜æ¨¡å‹ä¸ tokenizer

æœ¬è´¨ä¸Šï¼Œä½ åªéœ€è¦åšï¼š

1. æŠŠä½ çš„è®­ç»ƒä»£ç ç²˜è´´åˆ°æŒ‡å®šæ¨¡æ¿ä¸­  
2. æŠŠ UI å‚æ•°è¿æ¥åˆ°ä½ çš„ä»£ç ä¸­  
3. æ³¨å†Œæ—¥å¿—å›è°ƒå‡½æ•°  
4. ç•™ä¸‹æ¨¡å‹ä¿å­˜ä¸è®­ç»ƒå¯åŠ¨ç»™ DeepExtension è‡ªåŠ¨æ‰§è¡Œ

---

## ğŸ“ æ¶‰åŠçš„æ–‡ä»¶

åœ¨ Docker å·¥ä½œç›®å½•ä¸‹ï¼Œè¿›å…¥ `training/` ç›®å½•ï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹æ–‡ä»¶ï¼š

- `custom-template.py`  
- `run_local_train_test_template.py`  
- `test-training-code.py`  

> âš ï¸ ä¸è¦ä¿®æ”¹è¿™äº›æ¨¡æ¿æ–‡ä»¶ï¼Œå®ƒä»¬æ˜¯å‚è€ƒæ¨¡æ¿ï¼Œä»…ä¾›å¤åˆ¶ä½¿ç”¨ã€‚

---

## ğŸ§ª å‡†å¤‡ä½ çš„è‡ªå®šä¹‰è®­ç»ƒè„šæœ¬

å‡è®¾ä½ ç°åœ¨è¦å®ç° `custom01.py`ï¼Œå®ƒåœ¨ **Training Method Management** é¡µé¢ä¸­æ³¨å†Œã€‚

### æ­¥éª¤ 1ï¼šå¤åˆ¶æ¨¡æ¿æ–‡ä»¶

```bash
cp custom-template.py custom01.py
```

å¦‚æœ `custom01.py` å·²å­˜åœ¨ï¼Œè¯·æå‰å¤‡ä»½ã€‚

### æ­¥éª¤ 2ï¼šæ’å…¥ä½ çš„ä»£ç åˆ°æŒ‡å®šä½ç½®

åœ¨ `custom01.py` ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹ç»“æ„ï¼š

```python
#============ from here add your own train code

#============ end here with your own train code
```

æŠŠä½ å®Œæ•´çš„è®­ç»ƒé€»è¾‘ç²˜è´´åˆ°è¿™ä¸¤ä¸ªæ³¨é‡Šä¹‹é—´ã€‚

ä½ å…ˆå‰çš„ä»£ç éœ€è¦å®šä¹‰ä»¥ä¸‹å¯¹è±¡ï¼š

- `model`ï¼šå…·æœ‰ `save_pretrained()` æ–¹æ³•  
- `tokenizer`ï¼šå…·æœ‰ `save_pretrained()` æ–¹æ³•  
- `trainer`ï¼šå…·æœ‰ `train()` æ–¹æ³•  

å¦‚å˜é‡åä¸åŒï¼Œè¯·æ”¹åä¸ºä»¥ä¸Šæ ‡å‡†åç§°ã€‚

### æ­¥éª¤ 3ï¼šè¿æ¥å‚æ•°

å°†ä»¥ä¸‹å˜é‡ï¼ˆç”± UI ä¼ å…¥ï¼‰æ­£ç¡®åœ°æ˜ å°„åˆ°ä½ çš„è®­ç»ƒä»£ç ä¸­ï¼š

```text
MODEL_PATH, MAX_SEQ_LENGTH, LORA_RANK, LOAD_IN_4BIT
DATASET_PATH, MAX_INPUT_LENGTH, MAX_CONTENT_LENGTH, MAX_SAMPLES
NUM_GENERATIONS, MAX_GRAD_NORM, OUTPUT_DIR, MAX_STEPS
BATCH_SIZE, GRAD_ACCUM_STEPS, LEARNING_RATE, WARMUP_STEPS
PromptInputColumn, PromptOutputColumn
```

> ğŸš¨ è‡³å°‘ `MODEL_PATH` å’Œ `DATASET_PATH` æ˜¯å¿…é¡»ä½¿ç”¨çš„ã€‚

### æ­¥éª¤ 4ï¼šç»‘å®šæ—¥å¿—å›è°ƒ

åœ¨åˆå§‹åŒ– `trainer` æ—¶ï¼Œå¢åŠ å¦‚ä¸‹ä»£ç ï¼š

```python
trainer = ...(
    callbacks=[callback],
)
```

è¿™æ˜¯ä¸ºäº†è®© DeepExtension UI èƒ½å®æ—¶æŸ¥çœ‹è®­ç»ƒæ—¥å¿—å’ŒæŒ‡æ ‡ã€‚

### æ­¥éª¤ 5ï¼šåˆ é™¤è®­ç»ƒä¸ä¿å­˜çš„æ‰‹åŠ¨è°ƒç”¨

åœ¨ä½ è‡ªå·±çš„ä»£ç ä¸­ä¸è¦æ˜¾å¼è°ƒç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

```python
trainer.train()
model.save_pretrained(...)
tokenizer.save_pretrained(...)
```

å¦‚æœæœ‰è¯·åˆ é™¤ç›¸å…³ä»£ç ã€‚è¿™äº›ä¼šç”± DeepExtension è‡ªåŠ¨å®Œæˆã€‚

---

## ğŸ§ª æœ¬åœ°æµ‹è¯•è‡ªå®šä¹‰è®­ç»ƒä»£ç 

åœ¨ UI ä¸­æ­£å¼è¿è¡Œå‰ï¼Œå»ºè®®ä½ å…ˆåœ¨æœ¬åœ°æµ‹è¯•è¯¥æ–¹æ³•ã€‚

### A. å¤åˆ¶æµ‹è¯•æ¨¡æ¿

```bash
cp run_local_train_test_template.py run_local_train_test.py
```

### B. ä¿®æ”¹ä»¥ä¸‹å­—æ®µ

åœ¨ `run_local_train_test.py` ä¸­ä¿®æ”¹ï¼š

- `'your-model_path'` â†’ ä¸€ä¸ªæ³¨å†Œè¿‡çš„ base model çš„ç»å¯¹è·¯å¾„
- `'your-dataset_path'` â†’ æ•°æ®é›†çš„ç»å¯¹è·¯å¾„
- `'your-output_dir'` â†’ ä¿å­˜ä¸´æ—¶è®­ç»ƒç»“æœçš„è¾“å‡ºç›®å½•
- `'your-custom-file.py'` â†’ æ”¹ä¸º `custom01.py`
- å…¶ä»–å‚æ•°å¯æ ¹æ®éœ€è¦å¾®è°ƒ

### C. æ‰§è¡Œæµ‹è¯•

```bash
python run_local_train_test.py
```

### D. éªŒè¯ç»“æœ

ç¡®è®¤ï¼š

- è®­ç»ƒè¿‡ç¨‹èƒ½é¡ºåˆ©è¿è¡Œå®Œæ¯•  
- è¾“å‡ºæ–‡ä»¶æ­£ç¡®å†™å…¥ `your-output_dir`  

---

## âœ… å‡†å¤‡å°±ç»ª

å¦‚æœæµ‹è¯•é€šè¿‡ï¼Œä½ ç°åœ¨å°±å¯ä»¥é€šè¿‡ DeepExtension UI ä½¿ç”¨ **Custom01_Train** å¯åŠ¨è®­ç»ƒä»»åŠ¡äº†ã€‚

æœ‰å…³è®­ç»ƒä»»åŠ¡çš„å¯åŠ¨æ–¹æ³•ï¼Œè¯·å‚è€ƒï¼š  
ğŸ“˜ [æ¨¡å‹è®­ç»ƒæ¨¡å—](../user-guide/model-training.md)

---

*DeepExtension â€” è®©ä½ çš„è‡ªå®šä¹‰è®­ç»ƒä»£ç æ— ç¼é›†æˆåˆ°ä¼ä¸šçº§ AI æµæ°´çº¿ä¸­ã€‚*
